trigger:
- master   # your branch is master ðŸŸ¢

pool:
  vmImage: 'windows-latest'  # using windows agent for Selenium GUI

steps:

# Install Chrome & ChromeDriver
- powershell: |
    choco upgrade googlechrome -y
    choco upgrade chromedriver -y
  displayName: "Install Chrome & ChromeDriver"

# Run Selenium with Maven + TestNG
- task: Maven@3
  inputs:
    mavenPomFile: 'pom.xml'
    goals: 'clean test'
    publishJUnitResults: true
    testResultsFiles: '**/test-output/testng-results.xml'
  displayName: "Run Maven Test"

# Publish TestNG reports to Azure DevOps UI
- task: PublishTestResults@2
  inputs:
    testResultsFiles: '**/test-output/testng-results.xml'
    testRunner: 'TestNG'
  condition: succeededOrFailed()
  displayName: "Publish TestNG Results"

# (optional) Publish HTML reports if you have Extent/Surefire reports
- task: PublishBuildArtifacts@1
  inputs:
    pathToPublish: 'test-output'
    artifactName: 'Reports'
  displayName: "Publish Reports Artifact"

